import{Q as p,a as E,b as U}from"./QUploader.96780010.js";import{_ as b,A as D,r as g,K as y,U as F,C as l,D as s,E as o,M as t,F as a,L as r,H as i,G as d,aq as S,I as h,N as f,R as q,O as $,Q as I,aA as L,m as Q,ay as V,az as x}from"./index.e98fe3e5.js";import{Q as N,a as P}from"./QCard.e1fad818.js";import{Q as T}from"./QCardActions.686d4fad.js";import{Q as R}from"./QDialog.34a82b16.js";import{Q as j}from"./QPage.eb809f1d.js";import{C as w}from"./ClosePopup.38b2abd1.js";import{u as z}from"./audio.store.b6fdffa2.js";import{j as M}from"./message.store.86c71126.js";import"./position-engine.17c831e0.js";import"./format.3748299a.js";import"./use-dark.beab2589.js";import"./use-file.4377b425.js";import"./focus-manager.05708ea9.js";import"./settings.store.82a58d89.js";import"./use-quasar.6bf1d505.js";const O=D({name:"AudioPage",setup(){const e=g(!1),n=g(-1),c=z(),{audioList:C,audioUrl:k,apiUrl:B}=y(c),u=F(),{token:v}=y(u),A=M();return c.getAudio(),{audioList:C,token:v,confirm:e,audioUrl:k,apiUrl:B,uploaded:async m=>{await c.getAudio(),A.success(m.xhr.responseText)},failed:async m=>{A.error(JSON.parse(m.xhr.responseText).message)},confirmRemove:m=>{n.value=m,e.value=!0},removeAudio:async()=>{await c.removeAudio(n.value)}}}}),_=e=>(V("data-v-7f1d0d11"),e=e(),x(),e),G={class:"row justify-between items-start full-width"},H={class:"col-12 justify-start q-pa-md"},J={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},K={class:"col"},W=_(()=>t("div",{class:"q-uploader__title"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0430\u0443\u0434\u0438\u043E \u0444\u0430\u0439\u043B\u0430",-1)),X={class:"q-uploader__subtitle"},Y={class:"col-12 flex justify-center q-px-md bordered"},Z={key:0},uu={key:1,class:"full-width"},eu=_(()=>t("h6",null,"\u0421\u043F\u0438\u0441\u043E\u043A \u043C\u0443\u0437\u044B\u043A\u0430\u043B\u044C\u043D\u044B\u0445 \u0444\u0430\u0439\u043B\u043E\u0432",-1)),ou={class:"q-ma-sm text-primary text-bold"},au=["src"],tu=_(()=>t("span",{class:"q-ml-sm"},"\u0415\u0441\u043B\u0438 \u0430\u0443\u0434\u0438\u043E \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043A\u0430\u043A\u0438\u0445-\u043B\u0438\u0431\u043E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430\u0445, \u043E\u043D \u043D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D!",-1)),lu=_(()=>t("span",{class:"q-ml-sm"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0430\u0443\u0434\u0438\u043E \u0444\u0430\u0439\u043B?",-1));function su(e,n,c,C,k,B){return l(),s(j,null,{default:o(()=>[t("div",G,[t("section",H,[a(U,{url:e.apiUrl,label:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0430\u0443\u0434\u0438\u043E",color:"secondary","field-name":"audio",accept:".mp3",onUploaded:e.uploaded,onFailed:e.failed,headers:()=>[{name:"Authorization",value:`Bearer ${e.token}`}]},{header:o(u=>[t("div",J,[u.queuedFiles.length>0?(l(),s(r,{key:0,icon:"clear_all",onClick:u.removeQueuedFiles,round:"",dense:"",flat:""},{default:o(()=>[a(p,null,{default:o(()=>[i("\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C")]),_:1})]),_:2},1032,["onClick"])):d("",!0),u.uploadedFiles.length>0?(l(),s(r,{key:1,icon:"done_all",onClick:u.removeUploadedFiles,round:"",dense:"",flat:""},{default:o(()=>[a(p,null,{default:o(()=>[i("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B")]),_:1})]),_:2},1032,["onClick"])):d("",!0),u.isUploading?(l(),s(S,{key:2,class:"q-uploader__spinner"})):d("",!0),t("div",K,[W,t("div",X,h(u.uploadSizeLabel)+" / "+h(u.uploadProgressLabel),1)]),u.canAddFiles?(l(),s(r,{key:3,type:"a",icon:"add_box",onClick:u.pickFiles,round:"",dense:"",flat:""},{default:o(()=>[a(E),a(p,null,{default:o(()=>[i("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B")]),_:1})]),_:2},1032,["onClick"])):d("",!0),u.canUpload?(l(),s(r,{key:4,icon:"cloud_upload",onClick:u.upload,round:"",dense:"",flat:""},{default:o(()=>[a(p,null,{default:o(()=>[i("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B")]),_:1})]),_:2},1032,["onClick"])):d("",!0),u.isUploading?(l(),s(r,{key:5,icon:"clear",onClick:u.abort,round:"",dense:"",flat:""},{default:o(()=>[a(p,null,{default:o(()=>[i("Abort Upload")]),_:1})]),_:2},1032,["onClick"])):d("",!0)])]),_:1},8,["url","onUploaded","onFailed","headers"])]),t("section",Y,[e.audioList.length===0?(l(),f("h6",Z,"\u0421\u043F\u0438\u0441\u043E\u043A \u043C\u0443\u0437\u044B\u043A\u0430\u043B\u044C\u043D\u044B\u0445 \u0444\u0430\u0439\u043B\u043E\u0432 \u043F\u0443\u0441\u0442")):(l(),f("div",uu,[eu,(l(!0),f(q,null,$(e.audioList,u=>(l(),f("figure",{key:u.id,class:"full-width q-mb-sm"},[t("figcaption",ou,[i(h(u.name)+" ",1),a(I,{name:"delete",class:"icon",onClick:v=>e.confirmRemove(u.id)},null,8,["onClick"])]),t("audio",{controls:"",src:`${e.audioUrl}/${u.path}`,class:"full-width"},null,8,au)]))),128))]))])]),a(R,{modelValue:e.confirm,"onUpdate:modelValue":n[0]||(n[0]=u=>e.confirm=u),persistent:""},{default:o(()=>[a(N,null,{default:o(()=>[a(P,{class:"row items-center"},{default:o(()=>[a(L,{icon:"delete",color:"primary","text-color":"white"}),tu,lu]),_:1}),a(T,{align:"right"},{default:o(()=>[Q(a(r,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary"},null,512),[[w]]),Q(a(r,{flat:"",label:"\u0414\u0430",color:"primary",onClick:e.removeAudio},null,8,["onClick"]),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Uu=b(O,[["render",su],["__scopeId","data-v-7f1d0d11"]]);export{Uu as default};
