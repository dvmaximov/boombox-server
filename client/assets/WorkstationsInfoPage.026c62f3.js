import{A as P,aj as q,K as $,r as _,_ as k,C as r,N as c,F as i,E as v,M as e,I as d,L as C,ay as D,az as E,aE as b,B as y,R as S,O as B}from"./index.560831f4.js";import{C as I}from"./ConfirmDialog.d9a85114.js";import{Q}from"./QVirtualScroll.99adaabd.js";import{Q as j,a as x}from"./QCard.355d27c1.js";import{Q as A}from"./QDialog.32efb58f.js";import{a as V}from"./spinners.store.44dfcb68.js";import{a as N}from"./socket.store.5b234787.js";import"./QCardActions.1c72f331.js";import"./QList.fe9ba32a.js";import"./use-dark.dcbcdb18.js";import"./use-virtual-scroll.3b2fa90b.js";import"./message.store.67667b7f.js";import"./use-quasar.a0351368.js";import"./focus-manager.05708ea9.js";const R=P({name:"ProgramChoice",props:{isShow:{type:Boolean,default:!1}},setup(o,s){const a=q(()=>o.isShow),m=V(),{programs:h}=$(m),n=_(0),t=()=>{s.emit("closeChoice")};return{showChoice:a,programs:h,choicedId:n,closeChoice:t,choice:u=>{s.emit("choice",u),t()}}}}),T=o=>(D("data-v-425c251a"),o=o(),E(),o),W={class:"q-pa-md q-gutter-sm"},z=T(()=>e("div",{class:"text-h6"},"\u0412\u044B\u0431\u043E\u0440 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",-1)),O={class:"q-ma-sm q-pa-sm item",dense:"",clickable:""},L={class:"flex justify-between items-center"},K={class:"flex justify-center items-center q-ma-md"};function M(o,s,a,m,h,n){return r(),c("div",W,[i(A,{modelValue:o.showChoice,"onUpdate:modelValue":s[0]||(s[0]=t=>o.showChoice=t),persistent:""},{default:v(()=>[i(j,null,{default:v(()=>[i(x,null,{default:v(()=>[z,i(Q,{style:{height:"300px"},class:"q-px-md",items:o.programs,separator:""},{default:v(({item:t})=>[e("div",O,[e("div",L,[e("div",null,d(t.name),1),i(C,{size:"sm",round:"",color:"primary",label:">",onClick:l=>o.choice(t.id)},null,8,["onClick"])])])]),_:1},8,["items"])]),_:1}),e("div",K,[i(C,{label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",onClick:o.closeChoice},null,8,["onClick"])])]),_:1})]),_:1},8,["modelValue"])])}var U=k(R,[["render",M],["__scopeId","data-v-425c251a"]]);const G=P({name:"WorkstationsInfoPage",components:{ConfirmDialog:I,ProgramChoice:U},setup(){const o=b(),s=_("");s.value=o.query.name?o.query.name.toString():"";const a=N();a.clearPrograms();const{stationPrograms:m,isProgramsEmpty:h}=$(a),n=_(!1),t=_(!1),l=_(0),u=p=>{l.value=p,n.value=!0},f=()=>{n.value=!1,l.value=0},g=async()=>{await a.getProgramsByStationName(s.value)};g();const w=async p=>{await a.sendProgram(s.value,p)};return{name:s,stationPrograms:m,isProgramsEmpty:h,isShowDialog:n,isShowChoice:t,sendProgram:w,deleteProgram:async()=>{await a.deleteProgram(s.value,l.value),f()},confirmDelete:u,closeDialog:f,choice:async p=>{await w(p),g()}}}}),F=o=>(D("data-v-725234db"),o=o(),E(),o),H={class:"flex justify-center q-pa-sm q-gutter-md"},J={class:"program-list"},X={key:0},Y={key:1,class:"flex justify-center program-list"},Z=F(()=>e("div",{class:"full-width text-weight-bold text-h6 q-mb-lg"}," \u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C ",-1)),ee={class:"item-name"},oe={class:"q-mt-sm"},se=F(()=>e("div",{class:"item-params"},[e("div",null,[e("div",{lines:"1"},[e("span",{class:"text-weight-bold"},"\u0412\u0440\u0435\u043C\u044F \u0441\u0442\u0430\u0440\u0442\u0430")])]),e("div",null,[e("div",{lines:"1"},[e("span",{class:"text-weight-bold"},"\u0412\u0440\u0435\u043C\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F")])]),e("div",null,[e("div",{lines:"1"},[e("span",{class:"text-weight-bold"},"\u0412\u0440\u0435\u043C\u044F \u043F\u043E\u043A\u0430\u0437\u0430")])])],-1)),ue={class:"q-pl-sm item-values"},te={lines:"1"},ie={lines:"1"},ae={lines:"1"},ne={class:"flex justify-end item-control"},le={class:"q-gutter-xs"};function re(o,s,a,m,h,n){const t=y("ProgramChoice"),l=y("ConfirmDialog");return r(),c(S,null,[e("section",H,[e("h6",null,"\u0420\u0430\u0431\u043E\u0447\u0430\u044F \u0441\u0442\u0430\u043D\u0446\u0438\u044F '"+d(o.name)+"'",1),e("div",J,[i(C,{label:"\u041F\u0435\u0440\u0435\u0441\u043B\u0430\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443",color:"primary",onClick:s[0]||(s[0]=u=>o.isShowChoice=!0)})]),o.isProgramsEmpty?(r(),c("div",X,"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C \u043F\u0443\u0441\u0442")):(r(),c("div",Y,[Z,(r(!0),c(S,null,B(o.stationPrograms,u=>(r(),c("div",{class:"full-width flex justify-between q-pa-md item",key:u.id},[e("div",ee,[e("div",oe,d(u.name),1)]),se,e("div",ue,[e("div",null,[e("div",te,[e("span",null,d(u.startTime),1)])]),e("div",null,[e("div",ie,[e("span",null,d(u.endTime),1)])]),e("div",null,[e("div",ae,[e("span",null,d(u.imageShowTime)+" \u0441\u0435\u043A",1)])])]),e("div",ne,[e("div",le,[i(C,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:f=>o.confirmDelete(u.id)},null,8,["onClick"])])])]))),128))]))]),i(t,{isShow:o.isShowChoice,onCloseChoice:s[1]||(s[1]=u=>o.isShowChoice=!1),onChoice:o.choice},null,8,["isShow","onChoice"]),i(l,{isShow:o.isShowDialog,onOk:o.deleteProgram,onCancel:o.closeDialog,message:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443 \u043D\u0430 \u0441\u0442\u0430\u043D\u0446\u0438\u0438?"},null,8,["isShow","onOk","onCancel"])],64)}var De=k(G,[["render",re],["__scopeId","data-v-725234db"]]);export{De as default};
