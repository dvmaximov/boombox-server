import{d as qe,e as lt,f as nt,g as at,a as At,h as Tt,i as Ge,j as Pt}from"./QInput.d1daeb93.js";import{c as Be,r as w,d as s,w as Z,a1 as qt,h as g,e as Bt,ar as Dt,o as ot,j as it,ax as Lt,a3 as Q,aD as ce,n as p,ao as Et,aO as _t,$ as Pe,Q as Ht,a0 as Y,ad as Mt,as as Rt,z as Kt}from"./index.90eeaab3.js";import{Q as pt}from"./QChip.268db553.js";import{Q as Qt,a as $t,b as jt}from"./QItem.d39856ab.js";import{u as Nt,v as Je,b as zt,c as Ut,a as Wt,p as Ye,r as Ze,s as Xt,d as Gt}from"./position-engine.a7973a54.js";import{u as Jt,a as Yt,b as Zt,c as eu,g as tu}from"./message.store.97f1fdc6.js";import{u as uu,a as lu}from"./use-dark.ece6b24e.js";import{a as nu,u as au,b as ou,c as iu,d as ru,r as su,e as et,f as cu,g as du,Q as fu}from"./QDialog.faf7adf6.js";import{a as vu}from"./focus-manager.05708ea9.js";import{u as mu,a as gu}from"./use-virtual-scroll.bb9cb909.js";import{n as tt}from"./format.3e32b8d9.js";var hu=Be({name:"QMenu",inheritAttrs:!1,props:{...Nt,...Jt,...uu,...nu,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Je},self:{type:String,validator:Je},offset:{type:Array,validator:zt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Yt,"click","escapeKey"],setup(t,{slots:S,emit:r,attrs:P}){let k=null,i,v,f;const y=it(),{proxy:L}=y,{$q:x}=L,b=w(null),q=w(!1),I=s(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),$=lu(t,x),{registerTick:F,removeTick:ee}=au(),{registerTimeout:te}=Zt(),{transitionProps:B,transitionStyle:de}=ou(t),{localScrollTarget:fe,changeScrollEvent:C,unconfigureScrollTarget:_}=Ut(t,H),{anchorEl:E,canShow:ve}=Wt({showing:q}),{hide:ue}=eu({showing:q,canShow:ve,handleShow:n,handleHide:m,hideOnRouteChange:I,processOnMount:!0}),{showPortal:le,hidePortal:A,renderPortal:ke}=iu(y,b,ye,"menu"),ne={anchorEl:E,innerRef:b,onClickOutside(o){if(t.persistent!==!0&&q.value===!0)return ue(o),(o.type==="touchstart"||o.target.classList.contains("q-dialog__backdrop"))&&Q(o),!0}},ae=s(()=>Ye(t.anchor||(t.cover===!0?"center middle":"bottom start"),x.lang.rtl)),oe=s(()=>t.cover===!0?ae.value:Ye(t.self||"top start",x.lang.rtl)),xe=s(()=>(t.square===!0?" q-menu--square":"")+($.value===!0?" q-menu--dark q-dark":"")),me=s(()=>t.autoClose===!0?{onClick:re}:{}),ie=s(()=>q.value===!0&&t.persistent!==!0);Z(ie,o=>{o===!0?(du(N),Gt(ne)):(et(N),Ze(ne))});function j(){vu(()=>{let o=b.value;o&&o.contains(document.activeElement)!==!0&&(o=o.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.querySelector("[autofocus], [data-autofocus]")||o,o.focus({preventScroll:!0}))})}function n(o){if(k=t.noRefocus===!1?document.activeElement:null,ru(he),le(),H(),i=void 0,o!==void 0&&(t.touchPosition||t.contextMenu)){const M=qt(o);if(M.left!==void 0){const{top:we,left:Se}=E.value.getBoundingClientRect();i={left:M.left-Se,top:M.top-we}}}v===void 0&&(v=Z(()=>x.screen.width+"|"+x.screen.height+"|"+t.self+"|"+t.anchor+"|"+x.lang.rtl,T)),t.noFocus!==!0&&document.activeElement.blur(),F(()=>{T(),t.noFocus!==!0&&j()}),te(()=>{x.platform.is.ios===!0&&(f=t.autoClose,b.value.click()),T(),le(!0),r("show",o)},t.transitionDuration)}function m(o){ee(),A(),ge(!0),k!==null&&(o===void 0||o.qClickOutside!==!0)&&(((o&&o.type.indexOf("key")===0?k.closest('[tabindex]:not([tabindex^="-"])'):void 0)||k).focus(),k=null),te(()=>{A(!0),r("hide",o)},t.transitionDuration)}function ge(o){i=void 0,v!==void 0&&(v(),v=void 0),(o===!0||q.value===!0)&&(su(he),_(),Ze(ne),et(N)),o!==!0&&(k=null)}function H(){(E.value!==null||t.scrollTarget!==void 0)&&(fe.value=tu(E.value,t.scrollTarget),C(fe.value,T))}function re(o){f!==!0?(cu(L,o),r("click",o)):f=!1}function he(o){ie.value===!0&&t.noFocus!==!0&&Lt(b.value,o.target)!==!0&&j()}function N(o){r("escapeKey"),ue(o)}function T(){Xt({targetEl:b.value,offset:t.offset,anchorEl:E.value,anchorOrigin:ae.value,selfOrigin:oe.value,absoluteOffset:i,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function ye(){return g(Dt,B.value,()=>q.value===!0?g("div",{role:"menu",...P,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+xe.value,P.class],style:[P.style,de.value],...me.value},Bt(S.default)):null)}return ot(ge),Object.assign(L,{focus:j,updatePosition:T}),ke}}),yu=Be({name:"QField",inheritAttrs:!1,props:qe,emits:lt,setup(){return nt(at())}});const ut=t=>["add","add-unique","toggle"].includes(t),Su=".*+?^${}()|[]\\",Cu=Object.keys(qe);var qu=Be({name:"QSelect",inheritAttrs:!1,props:{...mu,...At,...qe,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:ut},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...lt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(t,{slots:S,emit:r}){const{proxy:P}=it(),{$q:k}=P,i=w(!1),v=w(!1),f=w(-1),y=w(""),L=w(!1),x=w(!1);let b=null,q,I,$,F=null,ee,te,B,de;const fe=w(null),C=w(null),_=w(null),E=w(null),ve=w(null),ue=Tt(t),le=Pt(Ne),A=s(()=>Array.isArray(t.options)?t.options.length:0),ke=s(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:ne,virtualScrollSliceSizeComputed:ae,localResetVirtualScroll:oe,padVirtualScroll:xe,onVirtualScrollEvt:me,scrollTo:ie,setVirtualScrollSize:j}=gu({virtualScrollLength:A,getVirtualScrollTarget:gt,getVirtualScrollEl:$e,virtualScrollItemSizeComputed:ke}),n=at(),m=s(()=>{const e=t.mapOptions===!0&&t.multiple!==!0,l=t.modelValue!==void 0&&(t.modelValue!==null||e===!0)?t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue]:[];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const u=t.mapOptions===!0&&q!==void 0?q:[],a=l.map(d=>mt(d,u));return t.modelValue===null&&e===!0?a.filter(d=>d!==null):a}return l}),ge=s(()=>{const e={};return Cu.forEach(l=>{const u=t[l];u!==void 0&&(e[l]=u)}),e}),H=s(()=>t.optionsDark===null?n.isDark.value:t.optionsDark),re=s(()=>Ge(m.value)),he=s(()=>{let e="q-field__input q-placeholder col";return t.hideSelected===!0||m.value.length===0?[e,t.inputClass]:(e+=" q-field__input--padding",t.inputClass===void 0?e:[e,t.inputClass])}),N=s(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),T=s(()=>A.value===0),ye=s(()=>m.value.map(e=>O.value(e)).join(", ")),o=s(()=>t.displayValue!==void 0?t.displayValue:ye.value),M=s(()=>t.optionsHtml===!0?()=>!0:e=>e!=null&&e.html===!0),we=s(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||m.value.some(M.value))),Se=s(()=>n.focused.value===!0?t.tabindex:-1),De=s(()=>{const e={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return f.value>=0&&(e["aria-activedescendant"]=`${n.targetUid.value}_${f.value}`),e}),Le=s(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Ee=s(()=>m.value.map((e,l)=>({index:l,opt:e,html:M.value(e),selected:!0,removeAtIndex:vt,toggleOption:R,tabindex:Se.value}))),rt=s(()=>{if(A.value===0)return[];const{from:e,to:l}=ne.value;return t.options.slice(e,l).map((u,a)=>{const d=z.value(u)===!0,c=e+a,h={clickable:!0,active:!1,activeClass:dt.value,manualFocus:!0,focused:!1,disable:d,tabindex:-1,dense:t.optionsDense,dark:H.value,role:"option",id:`${n.targetUid.value}_${c}`,onClick:()=>{R(u)}};return d!==!0&&(Fe(u)===!0&&(h.active=!0),f.value===c&&(h.focused=!0),h["aria-selected"]=h.active===!0?"true":"false",k.platform.is.desktop===!0&&(h.onMousemove=()=>{i.value===!0&&U(c)})),{index:c,opt:u,html:M.value(u),label:O.value(u),selected:h.active,focused:h.focused,toggleOption:R,setOptionIndex:U,itemProps:h}})}),st=s(()=>t.dropdownIcon!==void 0?t.dropdownIcon:k.iconSet.arrow.dropdown),ct=s(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),dt=s(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),D=s(()=>Oe(t.optionValue,"value")),O=s(()=>Oe(t.optionLabel,"label")),z=s(()=>Oe(t.optionDisable,"disable")),Ce=s(()=>m.value.map(e=>D.value(e))),ft=s(()=>{const e={onInput:Ne,onChange:le,onKeydown:Qe,onKeyup:Ke,onKeypress:pe,onFocus:Me,onClick(l){I===!0&&Y(l)}};return e.onCompositionstart=e.onCompositionupdate=e.onCompositionend=le,e});Z(m,e=>{q=e,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&n.innerLoading.value!==!0&&(v.value!==!0&&i.value!==!0||re.value!==!0)&&($!==!0&&J(),(v.value===!0||i.value===!0)&&W(""))},{immediate:!0}),Z(()=>t.fillInput,J),Z(i,Ae),Z(A,Ft);function _e(e){return t.emitValue===!0?D.value(e):e}function Ie(e){if(e>-1&&e<m.value.length)if(t.multiple===!0){const l=t.modelValue.slice();r("remove",{index:e,value:l.splice(e,1)[0]}),r("update:modelValue",l)}else r("update:modelValue",null)}function vt(e){Ie(e),n.focus()}function He(e,l){const u=_e(e);if(t.multiple!==!0){t.fillInput===!0&&se(O.value(e),!0,!0),r("update:modelValue",u);return}if(m.value.length===0){r("add",{index:0,value:u}),r("update:modelValue",t.multiple===!0?[u]:u);return}if(l===!0&&Fe(e)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const a=t.modelValue.slice();r("add",{index:a.length,value:u}),a.push(u),r("update:modelValue",a)}function R(e,l){if(n.editable.value!==!0||e===void 0||z.value(e)===!0)return;const u=D.value(e);if(t.multiple!==!0){l!==!0&&(se(t.fillInput===!0?O.value(e):"",!0,!0),K()),C.value!==null&&C.value.focus(),(m.value.length===0||ce(D.value(m.value[0]),u)!==!0)&&r("update:modelValue",t.emitValue===!0?u:e);return}if((I!==!0||L.value===!0)&&n.focus(),Me(),m.value.length===0){const c=t.emitValue===!0?u:e;r("add",{index:0,value:c}),r("update:modelValue",t.multiple===!0?[c]:c);return}const a=t.modelValue.slice(),d=Ce.value.findIndex(c=>ce(c,u));if(d>-1)r("remove",{index:d,value:a.splice(d,1)[0]});else{if(t.maxValues!==void 0&&a.length>=t.maxValues)return;const c=t.emitValue===!0?u:e;r("add",{index:a.length,value:c}),a.push(c)}r("update:modelValue",a)}function U(e){if(k.platform.is.desktop!==!0)return;const l=e>-1&&e<A.value?e:-1;f.value!==l&&(f.value=l)}function be(e=1,l){if(i.value===!0){let u=f.value;do u=tt(u+e,-1,A.value-1);while(u!==-1&&u!==f.value&&z.value(t.options[u])===!0);f.value!==u&&(U(u),ie(u),l!==!0&&t.useInput===!0&&t.fillInput===!0&&Ve(u>=0?O.value(t.options[u]):ee))}}function mt(e,l){const u=a=>ce(D.value(a),e);return t.options.find(u)||l.find(u)||e}function Oe(e,l){const u=e!==void 0?e:l;return typeof u=="function"?u:a=>a!==null&&typeof a=="object"&&u in a?a[u]:a}function Fe(e){const l=D.value(e);return Ce.value.find(u=>ce(u,l))!==void 0}function Me(e){t.useInput===!0&&C.value!==null&&(e===void 0||C.value===e.target&&e.target.value===ye.value)&&C.value.select()}function Re(e){Mt(e,27)===!0&&i.value===!0&&(Y(e),K(),J()),r("keyup",e)}function Ke(e){const{value:l}=e.target;if(e.keyCode!==void 0){Re(e);return}if(e.target.value="",b!==null&&(clearTimeout(b),b=null),J(),typeof l=="string"&&l.length!==0){const u=l.toLocaleLowerCase(),a=c=>{const h=t.options.find(V=>c.value(V).toLocaleLowerCase()===u);return h===void 0?!1:(m.value.indexOf(h)===-1?R(h):K(),!0)},d=c=>{a(D)!==!0&&(a(O)===!0||c===!0||W(l,!0,()=>d(!0)))};d()}else n.clearValue(e)}function pe(e){r("keypress",e)}function Qe(e){if(r("keydown",e),Rt(e)===!0)return;const l=y.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),u=e.shiftKey!==!0&&t.multiple!==!0&&(f.value>-1||l===!0);if(e.keyCode===27){Pe(e);return}if(e.keyCode===9&&u===!1){X();return}if(e.target===void 0||e.target.id!==n.targetUid.value||n.editable.value!==!0)return;if(e.keyCode===40&&n.innerLoading.value!==!0&&i.value===!1){Q(e),G();return}if(e.keyCode===8&&t.hideSelected!==!0&&y.value.length===0){t.multiple===!0&&Array.isArray(t.modelValue)===!0?Ie(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&r("update:modelValue",null);return}(e.keyCode===35||e.keyCode===36)&&(typeof y.value!="string"||y.value.length===0)&&(Q(e),f.value=-1,be(e.keyCode===36?1:-1,t.multiple)),(e.keyCode===33||e.keyCode===34)&&ae.value!==void 0&&(Q(e),f.value=Math.max(-1,Math.min(A.value,f.value+(e.keyCode===33?-1:1)*ae.value.view)),be(e.keyCode===33?1:-1,t.multiple)),(e.keyCode===38||e.keyCode===40)&&(Q(e),be(e.keyCode===38?-1:1,t.multiple));const a=A.value;if((B===void 0||de<Date.now())&&(B=""),a>0&&t.useInput!==!0&&e.key!==void 0&&e.key.length===1&&e.altKey===!1&&e.ctrlKey===!1&&e.metaKey===!1&&(e.keyCode!==32||B.length!==0)){i.value!==!0&&G(e);const d=e.key.toLocaleLowerCase(),c=B.length===1&&B[0]===d;de=Date.now()+1500,c===!1&&(Q(e),B+=d);const h=new RegExp("^"+B.split("").map(Te=>Su.indexOf(Te)>-1?"\\"+Te:Te).join(".*"),"i");let V=f.value;if(c===!0||V<0||h.test(O.value(t.options[V]))!==!0)do V=tt(V+1,-1,a-1);while(V!==f.value&&(z.value(t.options[V])===!0||h.test(O.value(t.options[V]))!==!0));f.value!==V&&p(()=>{U(V),ie(V),V>=0&&t.useInput===!0&&t.fillInput===!0&&Ve(O.value(t.options[V]))});return}if(!(e.keyCode!==13&&(e.keyCode!==32||t.useInput===!0||B!=="")&&(e.keyCode!==9||u===!1))){if(e.keyCode!==9&&Q(e),f.value>-1&&f.value<a){R(t.options[f.value]);return}if(l===!0){const d=(c,h)=>{if(h){if(ut(h)!==!0)return}else h=t.newValueMode;if(se("",t.multiple!==!0,!0),c==null)return;(h==="toggle"?R:He)(c,h==="add-unique"),t.multiple!==!0&&(C.value!==null&&C.value.focus(),K())};if(t.onNewValue!==void 0?r("newValue",y.value,d):d(y.value),t.multiple!==!0)return}i.value===!0?X():n.innerLoading.value!==!0&&G()}}function $e(){return I===!0?ve.value:_.value!==null&&_.value.contentEl!==null?_.value.contentEl:void 0}function gt(){return $e()}function ht(){return t.hideSelected===!0?[]:S["selected-item"]!==void 0?Ee.value.map(e=>S["selected-item"](e)).slice():S.selected!==void 0?[].concat(S.selected()):t.useChips===!0?Ee.value.map((e,l)=>g(pt,{key:"option-"+l,removable:n.editable.value===!0&&z.value(e.opt)!==!0,dense:!0,textColor:t.color,tabindex:Se.value,onRemove(){e.removeAtIndex(l)}},()=>g("span",{class:"ellipsis",[e.html===!0?"innerHTML":"textContent"]:O.value(e.opt)}))):[g("span",{[we.value===!0?"innerHTML":"textContent"]:o.value})]}function je(){if(T.value===!0)return S["no-option"]!==void 0?S["no-option"]({inputValue:y.value}):void 0;const e=S.option!==void 0?S.option:u=>g(jt,{key:u.index,...u.itemProps},()=>g(Qt,()=>g($t,()=>g("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let l=xe("div",rt.value.map(e));return S["before-options"]!==void 0&&(l=S["before-options"]().concat(l)),Kt(S["after-options"],l)}function yt(e,l){const u=l===!0?{...De.value,...n.splitAttrs.attributes.value}:void 0,a={ref:l===!0?C:void 0,key:"i_t",class:he.value,style:t.inputStyle,value:y.value!==void 0?y.value:"",type:"search",...u,id:l===!0?n.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":e===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...ft.value};return e!==!0&&I===!0&&(Array.isArray(a.class)===!0?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),g("input",a)}function Ne(e){b!==null&&(clearTimeout(b),b=null),!(e&&e.target&&e.target.qComposing===!0)&&(Ve(e.target.value||""),$=!0,ee=y.value,n.focused.value!==!0&&(I!==!0||L.value===!0)&&n.focus(),t.onFilter!==void 0&&(b=setTimeout(()=>{b=null,W(y.value)},t.inputDebounce)))}function Ve(e){y.value!==e&&(y.value=e,r("inputValue",e))}function se(e,l,u){$=u!==!0,t.useInput===!0&&(Ve(e),(l===!0||u!==!0)&&(ee=e),l!==!0&&W(e))}function W(e,l,u){if(t.onFilter===void 0||l!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?r("filterAbort"):(n.innerLoading.value=!0,x.value=!0),e!==""&&t.multiple!==!0&&m.value.length!==0&&$!==!0&&e===O.value(m.value[0])&&(e="");const a=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);F!==null&&clearTimeout(F),F=a,r("filter",e,(d,c)=>{(l===!0||n.focused.value===!0)&&F===a&&(clearTimeout(F),typeof d=="function"&&d(),x.value=!1,p(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(l===!0?i.value===!0&&K():i.value===!0?Ae(!0):i.value=!0),typeof c=="function"&&p(()=>{c(P)}),typeof u=="function"&&p(()=>{u(P)})}))},()=>{n.focused.value===!0&&F===a&&(clearTimeout(F),n.innerLoading.value=!1,x.value=!1),i.value===!0&&(i.value=!1)})}function St(){return g(hu,{ref:_,class:N.value,style:t.popupContentStyle,modelValue:i.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&T.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:H.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:ct.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Le.value,onScrollPassive:me,onBeforeShow:Ue,onBeforeHide:Ct,onShow:bt},je)}function Ct(e){We(e),X()}function bt(){j()}function Vt(e){Y(e),C.value!==null&&C.value.focus(),L.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function kt(e){Y(e),p(()=>{L.value=!1})}function xt(){const e=[g(yu,{class:`col-auto ${n.fieldClass.value}`,...ge.value,for:n.targetUid.value,dark:H.value,square:!0,loading:x.value,itemAligned:!1,filled:!0,stackLabel:y.value.length!==0,...n.splitAttrs.listeners.value,onFocus:Vt,onBlur:kt},{...S,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&e.push(g("div",{ref:ve,class:N.value+" scroll",style:t.popupContentStyle,...Le.value,onClick:Pe,onScrollPassive:me},je())),g(fu,{ref:E,modelValue:v.value,position:t.useInput===!0?"top":void 0,transitionShow:te,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:Ue,onBeforeHide:wt,onHide:It,onShow:Ot},()=>g("div",{class:"q-select__dialog"+(H.value===!0?" q-select__dialog--dark q-dark":"")+(L.value===!0?" q-select__dialog--focused":"")},e))}function wt(e){We(e),E.value!==null&&E.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function It(e){K(),n.focused.value===!1&&r("blur",e),J()}function Ot(){const e=document.activeElement;(e===null||e.id!==n.targetUid.value)&&C.value!==null&&C.value!==e&&C.value.focus(),j()}function X(){v.value!==!0&&(f.value=-1,i.value===!0&&(i.value=!1),n.focused.value===!1&&(F!==null&&(clearTimeout(F),F=null),n.innerLoading.value===!0&&(r("filterAbort"),n.innerLoading.value=!1,x.value=!1)))}function G(e){n.editable.value===!0&&(I===!0?(n.onControlFocusin(e),v.value=!0,p(()=>{n.focus()})):n.focus(),t.onFilter!==void 0?W(y.value):(T.value!==!0||S["no-option"]!==void 0)&&(i.value=!0))}function K(){v.value=!1,X()}function J(){t.useInput===!0&&se(t.multiple!==!0&&t.fillInput===!0&&m.value.length!==0&&O.value(m.value[0])||"",!0,!0)}function Ae(e){let l=-1;if(e===!0){if(m.value.length!==0){const u=D.value(m.value[0]);l=t.options.findIndex(a=>ce(D.value(a),u))}oe(l)}U(l)}function Ft(e,l){i.value===!0&&n.innerLoading.value===!1&&(oe(-1,!0),p(()=>{i.value===!0&&n.innerLoading.value===!1&&(e>l?oe():Ae(!0))}))}function ze(){v.value===!1&&_.value!==null&&_.value.updatePosition()}function Ue(e){e!==void 0&&Y(e),r("popupShow",e),n.hasPopupOpen=!0,n.onControlFocusin(e)}function We(e){e!==void 0&&Y(e),r("popupHide",e),n.hasPopupOpen=!1,n.onControlFocusout(e)}function Xe(){I=k.platform.is.mobile!==!0&&t.behavior!=="dialog"?!1:t.behavior!=="menu"&&(t.useInput===!0?S["no-option"]!==void 0||t.onFilter!==void 0||T.value===!1:!0),te=k.platform.is.ios===!0&&I===!0&&t.useInput===!0?"fade":t.transitionShow}return Et(Xe),_t(ze),Xe(),ot(()=>{b!==null&&clearTimeout(b)}),Object.assign(P,{showPopup:G,hidePopup:K,removeAtIndex:Ie,add:He,toggleOption:R,getOptionIndex:()=>f.value,setOptionIndex:U,moveOptionSelection:be,filter:W,updateMenuPosition:ze,updateInputValue:se,isOptionSelected:Fe,getEmittingOptionValue:_e,isOptionDisabled:(...e)=>z.value.apply(null,e)===!0,getOptionValue:(...e)=>D.value.apply(null,e),getOptionLabel:(...e)=>O.value.apply(null,e)}),Object.assign(n,{innerValue:m,fieldClass:s(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:fe,targetRef:C,hasValue:re,showPopup:G,floatingLabel:s(()=>t.hideSelected!==!0&&re.value===!0||typeof y.value=="number"||y.value.length!==0||Ge(t.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(v.value===!0||T.value!==!0||S["no-option"]!==void 0))return I===!0?xt():St();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(e){n.onControlFocusin(e)},onFocusout(e){n.onControlFocusout(e,()=>{J(),X()})},onClick(e){if(Pe(e),I!==!0&&i.value===!0){X(),C.value!==null&&C.value.focus();return}G(e)}},getControl:e=>{const l=ht(),u=e===!0||v.value!==!0||I!==!0;if(t.useInput===!0)l.push(yt(e,u));else if(n.editable.value===!0){const d=u===!0?De.value:void 0;l.push(g("input",{ref:u===!0?C:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?n.targetUid.value:void 0,value:o.value,readonly:!0,"data-autofocus":e===!0||t.autofocus===!0||void 0,...d,onKeydown:Qe,onKeyup:Re,onKeypress:pe})),u===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&l.push(g("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:Ke}))}if(ue.value!==void 0&&t.disable!==!0&&Ce.value.length!==0){const d=Ce.value.map(c=>g("option",{value:c,selected:!0}));l.push(g("select",{class:"hidden",name:ue.value,multiple:t.multiple},d))}const a=t.useInput===!0||u!==!0?void 0:n.splitAttrs.attributes.value;return g("div",{class:"q-field__native row items-center",...a,...n.splitAttrs.listeners.value},l)},getInnerAppend:()=>t.loading!==!0&&x.value!==!0&&t.hideDropdownIcon!==!0?[g(Ht,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:st.value})]:null}),nt(n)}});function Bu(t,S){const r=w(null),P=s(()=>t.disable===!0?null:g("span",{ref:r,class:"no-outline",tabindex:-1}));function k(i){const v=S.value;i!==void 0&&i.type.indexOf("key")===0?v!==null&&document.activeElement!==v&&v.contains(document.activeElement)===!0&&v.focus():r.value!==null&&(i===void 0||v!==null&&v.contains(i.target)===!0)&&r.value.focus()}return{refocusTargetEl:P,refocusTarget:k}}var Du={xs:30,sm:35,md:40,lg:50,xl:60};export{hu as Q,qu as a,Du as o,Bu as u};
