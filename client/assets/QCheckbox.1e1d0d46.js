import{S as Q,K as F,T,d as o,c as R,r as S,w as M,o as A,h as i,ar as D,e as O,aq as E,aM as H,aP as q,z as K,aL as U,j as W,a3 as N,Q as G}from"./index.1a710307.js";import{u as J}from"./settings.store.efbfb0bd.js";import{a as X,u as Y}from"./use-dark.e1857b32.js";import{u as Z,o as ee}from"./option-sizes.edb4db05.js";import{a as te,c as ae}from"./QInput.f4bd6e76.js";const ve=Q("images",{state:()=>({imagesList:[]}),getters:{placeholderUrl:()=>{const e=J();return F(e),`${location.protocol}//${location.hostname}/images/placeholder.jpg`},images:e=>(l,t)=>{let s=[];return t===""?s=e.imagesList.filter(u=>u.category===l):s=e.imagesList.filter(u=>u.name.toLowerCase().includes(t.toLowerCase())),s}},actions:{async getImages(){try{const e=await T.fetch("images");e.error||(this.imagesList=e.result||[])}catch{}},getImageById(e){try{return this.imagesList.find(t=>t.id===e)}catch{}},async removeImage(e){try{(await T.remove("images",e)).error||await this.getImages()}catch{}},async insert(e){try{const l=await T.insert("images",e);l.error||this.imagesList.push({...l.result})}catch{}},async update(e){try{(await T.update("images",e)).error||await this.getImages()}catch{}}}}),ne={ratio:[String,Number]};function le(e,l){return o(()=>{const t=Number(e.ratio||(l!==void 0?l.value:void 0));return isNaN(t)!==!0&&t>0?{paddingBottom:`${100/t}%`}:null})}const re=16/9;var he=R({name:"QImg",props:{...ne,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:re},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:l,emit:t}){const s=S(e.initialRatio),u=le(e,s);let r=null,y=!1;const g=[S(null),S(k())],c=S(0),f=S(!1),m=S(!1),z=o(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),v=o(()=>({width:e.width,height:e.height})),I=o(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),d=o(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));M(()=>h(),C);function h(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function k(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function C(a){r!==null&&(clearTimeout(r),r=null),m.value=!1,a===null?(f.value=!1,g[c.value^1].value=k()):f.value=!0,g[c.value].value=a}function B({target:a}){y!==!0&&(r!==null&&(clearTimeout(r),r=null),s.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,V(a,1))}function V(a,_){y===!0||_===1e3||(a.complete===!0?L(a):r=setTimeout(()=>{r=null,V(a,_+1)},50))}function L(a){y!==!0&&(c.value=c.value^1,g[c.value].value=null,f.value=!1,m.value=!1,t("load",a.currentSrc||a.src))}function p(a){r!==null&&(clearTimeout(r),r=null),f.value=!1,m.value=!0,g[c.value].value=null,g[c.value^1].value=k(),t("error",a)}function $(a){const _=g[a].value,w={key:"img_"+a,class:I.value,style:d.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,..._};return c.value===a?(w.class+=" q-img__image--waiting",Object.assign(w,{onLoad:B,onError:p})):w.class+=" q-img__image--loaded",i("div",{class:"q-img__container absolute-full",key:"img"+a},i("img",w))}function x(){return f.value!==!0?i("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},O(l[m.value===!0?"error":"default"])):i("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},l.loading!==void 0?l.loading():e.noSpinner===!0?void 0:[i(E,{color:e.spinnerColor,size:e.spinnerSize})])}return C(h()),A(()=>{y=!0,r!==null&&(clearTimeout(r),r=null)}),()=>{const a=[];return u.value!==null&&a.push(i("div",{key:"filler",style:u.value})),m.value!==!0&&(g[0].value!==null&&a.push($(0)),g[1].value!==null&&a.push($(1))),a.push(i(D,{name:"q-transition--fade"},x)),i("div",{class:z.value,style:v.value,role:"img","aria-label":e.alt},a)}}});const ie={...Y,...U,...te,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},oe=["update:modelValue"];function se(e,l){const{props:t,slots:s,emit:u,proxy:r}=W(),{$q:y}=r,g=X(t,y),c=S(null),{refocusTargetEl:f,refocusTarget:m}=Z(t,c),z=H(t,ee),v=o(()=>t.val!==void 0&&Array.isArray(t.modelValue)),I=o(()=>{const n=q(t.val);return v.value===!0?t.modelValue.findIndex(b=>q(b)===n):-1}),d=o(()=>v.value===!0?I.value>-1:q(t.modelValue)===q(t.trueValue)),h=o(()=>v.value===!0?I.value===-1:q(t.modelValue)===q(t.falseValue)),k=o(()=>d.value===!1&&h.value===!1),C=o(()=>t.disable===!0?-1:t.tabindex||0),B=o(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(g.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),V=o(()=>{const n=d.value===!0?"truthy":h.value===!0?"falsy":"indet",b=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?d.value===!0:h.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${n}${b}`}),L=o(()=>{const n={type:"checkbox"};return t.name!==void 0&&Object.assign(n,{".checked":d.value,"^checked":d.value===!0?"checked":void 0,name:t.name,value:v.value===!0?t.val:t.trueValue}),n}),p=ae(L),$=o(()=>{const n={tabindex:C.value,role:e==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":k.value===!0?"mixed":d.value===!0?"true":"false"};return t.disable===!0&&(n["aria-disabled"]="true"),n});function x(n){n!==void 0&&(N(n),m(n)),t.disable!==!0&&u("update:modelValue",a(),n)}function a(){if(v.value===!0){if(d.value===!0){const n=t.modelValue.slice();return n.splice(I.value,1),n}return t.modelValue.concat([t.val])}if(d.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(h.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function _(n){(n.keyCode===13||n.keyCode===32)&&N(n)}function w(n){(n.keyCode===13||n.keyCode===32)&&x(n)}const P=l(d,k);return Object.assign(r,{toggle:x}),()=>{const n=P();t.disable!==!0&&p(n,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const b=[i("div",{class:V.value,style:z.value,"aria-hidden":"true"},n)];f.value!==null&&b.push(f.value);const j=t.label!==void 0?K(s.default,[t.label]):O(s.default);return j!==void 0&&b.push(i("div",{class:`q-${e}__label q-anchor--skip`},j)),i("div",{ref:c,class:B.value,...$.value,onClick:x,onKeydown:_,onKeyup:w},b)}}const ue=i("div",{key:"svg",class:"q-checkbox__bg absolute"},[i("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[i("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),i("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var be=R({name:"QCheckbox",props:ie,emits:oe,setup(e){function l(t,s){const u=o(()=>(t.value===!0?e.checkedIcon:s.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>u.value!==null?[i("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[i(G,{class:"q-checkbox__icon",name:u.value})])]:[ue]}return se("checkbox",l)}});export{he as Q,be as a,ve as u};
