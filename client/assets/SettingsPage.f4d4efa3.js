import{Q as x}from"./QPage.db67e206.js";import{Q as D}from"./QInput.18392d34.js";import{A as w,r as h,aj as k,a2 as q,ag as P,_ as E,C as c,N as f,F as u,E as a,ak as Q,L as C,M as r,K as j,w as A,B as F,I as _,R as v,O as y,H as b,D as N}from"./index.4441ceb3.js";import{Q as V}from"./QForm.f6f4438b.js";import{j as R,k as U}from"./message.store.bae39a4e.js";import{Q as I,a as B}from"./QCard.d7e72495.js";import{Q as $}from"./QSeparator.f1dec3d8.js";import{Q as M}from"./QCardActions.b0c1adaf.js";import{Q as L}from"./QDialog.6fcb56e8.js";import{u as T}from"./use-quasar.ff10fabc.js";import"./use-dark.23e6962f.js";import"./focus-manager.05708ea9.js";const H=w({name:"ChangePassword",props:{isShow:{type:Boolean,default:!1}},setup(e,o){const n=h(""),m=k(()=>e.isShow),i=q(),p=P(),t=T(),s=async()=>{if(n.value==""){t.notify({type:"negative",message:"\u041F\u043E\u043B\u0435 \u043F\u0430\u0440\u043E\u043B\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C!"});return}i.changePassword(n.value).then(S=>{S?(i.logout(),p.push("/")):t.notify({type:"negative",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043C\u0435\u043D\u044B \u043F\u0430\u0440\u043E\u043B\u044F"})}),d()},d=()=>{o.emit("close")};return{password:n,showEditor:m,onSubmit:s,closeEdit:d}}}),K={class:"q-pa-md q-gutter-sm"},O=r("div",{class:"text-h6"},"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F",-1);function z(e,o,n,m,i,p){return c(),f("div",K,[u(L,{modelValue:e.showEditor,"onUpdate:modelValue":o[1]||(o[1]=t=>e.showEditor=t),persistent:""},{default:a(()=>[u(I,null,{default:a(()=>[u(B,null,{default:a(()=>[O]),_:1}),u($),u(V,{class:"full-width",onSubmit:Q(e.onSubmit,["prevent","stop"])},{default:a(()=>[u(B,{style:{"max-height":"60vh"},class:"scroll"},{default:a(()=>[u(D,{class:"col-6 q-mb-md",outlined:"",autofocus:"",label:"\u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C *",type:"password",modelValue:e.password,"onUpdate:modelValue":o[0]||(o[0]=t=>e.password=t)},null,8,["modelValue"])]),_:1}),u($),u(M,{align:"right"},{default:a(()=>[u(C,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",onClick:e.closeEdit},null,8,["onClick"]),u(C,{flat:"",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}var G=E(H,[["render",z]]);const J=w({name:"SettingsComponent",components:{ChangePassword:G},setup(){const e=h(!1),o=R(),n=U();o.getSettings().then(l=>{d(l)});const m=()=>{e.value=!1},{settings:i,ip:p}=j(o),t=h([]),s=h([]),d=l=>{t.value=l.filter(g=>g.editable==="true"),s.value=l.filter(g=>g.editable==="false")};return A(i,l=>{d(l)}),{settingsEditable:t,settingsNotEditable:s,ip:p,isShowEditor:e,saveSettings:()=>{for(let l of t.value)if(l.value===""){n.error(`\u041F\u043E\u043B\u0435 '${l.label}' \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C`);return}o.updateSettings([...s.value,...t.value]).then(()=>{n.success("\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B")})},closeEditor:m}}}),W=r("h6",{class:"text-center"},"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0442\u0430\u043D\u0446\u0438\u0438",-1),X={class:"row flex justify-center full-width q-my-md text-bold text-uppercase"},Y=r("div",{class:"col-2",textContent:"IP \u0430\u0434\u0440\u0435\u0441\u0430"},null,-1),Z=["textContent"],ee=["textContent"],ue=["textContent"],te={class:"row justify-center full-width q-my-md"};function se(e,o,n,m,i,p){const t=F("ChangePassword");return c(),f(v,null,[W,r("div",X,[Y,r("div",{class:"col-5",textContent:_(e.ip)},null,8,Z)]),(c(!0),f(v,null,y(e.settingsNotEditable,s=>(c(),f("div",{key:s.id,class:"row flex justify-center full-width q-my-md text-bold text-uppercase"},[r("div",{class:"col-2",textContent:_(s.label)},null,8,ee),r("div",{class:"col-5",textContent:_(s.value)},null,8,ue)]))),128)),u(V,{class:"full-width",onSubmit:Q(e.saveSettings,["prevent","stop"])},{default:a(()=>[(c(!0),f(v,null,y(e.settingsEditable,s=>(c(),f("div",{key:s.id,class:"row justify-center full-width q-my-md"},[u(D,{class:"col-6",outlined:"",modelValue:s.value,"onUpdate:modelValue":d=>s.value=d,label:s.label},null,8,["modelValue","onUpdate:modelValue","label"])]))),128)),r("div",te,[u(C,{class:"q-ma-md",color:"primary",rounded:"",type:"submit"},{default:a(()=>[b("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C")]),_:1}),u(C,{class:"q-ma-md",color:"primary",rounded:"",onClick:o[0]||(o[0]=s=>e.isShowEditor=!0)},{default:a(()=>[b("\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C")]),_:1})])]),_:1},8,["onSubmit"]),u(t,{isShow:e.isShowEditor,onClose:e.closeEditor},null,8,["isShow","onClose"])],64)}var oe=E(J,[["render",se]]);const ae=w({name:"SettingsPage",components:{SettingsComponent:oe},setup(){return{}}}),ne={class:"full-width"};function le(e,o,n,m,i,p){const t=F("SettingsComponent");return c(),N(x,{class:"flex justify-center"},{default:a(()=>[r("section",ne,[u(t)])]),_:1})}var we=E(ae,[["render",le]]);export{we as default};
