import{Q as x}from"./QPage.a8bdf3d3.js";import{Q as D}from"./QInput.04a714c4.js";import{A as g,r as h,aj as k,U as q,_ as v,C as d,N as p,F as t,E as a,ak as B,L as C,M as n,K as F,w as P,B as Q,I as w,R as S,O as E,H as b,D as j}from"./index.5187f60d.js";import{Q as V}from"./QForm.3edd3e95.js";import{u as N}from"./settings.store.0a343494.js";import{j as A}from"./message.store.ca1fb33b.js";import{Q as U,a as y}from"./QCard.71228f87.js";import{Q as $}from"./QSeparator.910ceaf3.js";import{Q as I}from"./QCardActions.21a8bba9.js";import{Q as M}from"./QDialog.a0635fa2.js";import"./use-dark.4d6c07af.js";import"./focus-manager.05708ea9.js";import"./use-quasar.c7717807.js";const R=g({name:"ChangePassword",props:{isShow:{type:Boolean,default:!1}},setup(e,s){const r=h(""),c=k(()=>e.isShow);q();const m=async()=>{i()},i=()=>{s.emit("close")};return{password:r,showEditor:c,onSubmit:m,closeEdit:i}}}),L={class:"q-pa-md q-gutter-sm"},T=n("div",{class:"text-h6"},"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F",-1);function H(e,s,r,c,m,i){return d(),p("div",L,[t(M,{modelValue:e.showEditor,"onUpdate:modelValue":s[1]||(s[1]=o=>e.showEditor=o),persistent:""},{default:a(()=>[t(U,null,{default:a(()=>[t(y,null,{default:a(()=>[T]),_:1}),t($),t(V,{class:"full-width",onSubmit:B(e.onSubmit,["prevent","stop"])},{default:a(()=>[t(y,{style:{"max-height":"60vh"},class:"scroll"},{default:a(()=>[t(D,{class:"col-6 q-mb-md",outlined:"",autofocus:"",label:"\u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C *",type:"password",modelValue:e.password,"onUpdate:modelValue":s[0]||(s[0]=o=>e.password=o)},null,8,["modelValue"])]),_:1}),t($),t(I,{align:"right"},{default:a(()=>[t(C,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",onClick:e.closeEdit},null,8,["onClick"]),t(C,{flat:"",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}var K=v(R,[["render",H]]);const O=g({name:"SettingsComponent",components:{ChangePassword:K},setup(){const e=h(!1),s=N(),r=A();s.getSettings().then(l=>{f(l)});const c=()=>{e.value=!1},{settings:m,ip:i}=F(s),o=h([]),u=h([]),f=l=>{o.value=l.filter(_=>_.editable==="true"),u.value=l.filter(_=>_.editable==="false")};return P(m,l=>{f(l)}),{settingsEditable:o,settingsNotEditable:u,ip:i,isShowEditor:e,saveSettings:()=>{for(let l of o.value)if(l.value===""){r.error(`\u041F\u043E\u043B\u0435 '${l.label}' \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C`);return}s.updateSettings([...u.value,...o.value]).then(()=>{r.success("\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B")})},closeEditor:c}}}),z=n("h6",{class:"text-center"},"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0442\u0430\u043D\u0446\u0438\u0438",-1),G={class:"row flex justify-center full-width q-my-md text-bold text-uppercase"},J=n("div",{class:"col-2",textContent:"IP \u0430\u0434\u0440\u0435\u0441\u0430"},null,-1),W=["textContent"],X=["textContent"],Y=["textContent"],Z={class:"row justify-center full-width q-my-md"};function ee(e,s,r,c,m,i){const o=Q("ChangePassword");return d(),p(S,null,[z,n("div",G,[J,n("div",{class:"col-5",textContent:w(e.ip)},null,8,W)]),(d(!0),p(S,null,E(e.settingsNotEditable,u=>(d(),p("div",{key:u.id,class:"row flex justify-center full-width q-my-md text-bold text-uppercase"},[n("div",{class:"col-2",textContent:w(u.label)},null,8,X),n("div",{class:"col-5",textContent:w(u.value)},null,8,Y)]))),128)),t(V,{class:"full-width",onSubmit:B(e.saveSettings,["prevent","stop"])},{default:a(()=>[(d(!0),p(S,null,E(e.settingsEditable,u=>(d(),p("div",{key:u.id,class:"row justify-center full-width q-my-md"},[t(D,{class:"col-6",outlined:"",modelValue:u.value,"onUpdate:modelValue":f=>u.value=f,label:u.label},null,8,["modelValue","onUpdate:modelValue","label"])]))),128)),n("div",Z,[t(C,{class:"q-ma-md",color:"primary",rounded:"",type:"submit"},{default:a(()=>[b("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C")]),_:1}),t(C,{class:"q-ma-md",color:"primary",rounded:"",onClick:s[0]||(s[0]=u=>e.isShowEditor=!0)},{default:a(()=>[b("\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C")]),_:1})])]),_:1},8,["onSubmit"]),t(o,{isShow:e.isShowEditor,onClose:e.closeEditor},null,8,["isShow","onClose"])],64)}var te=v(O,[["render",ee]]);const se=g({name:"SettingsPage",components:{SettingsComponent:te},setup(){return{}}}),ue={class:"full-width"};function oe(e,s,r,c,m,i){const o=Q("SettingsComponent");return d(),j(x,{class:"flex justify-center"},{default:a(()=>[n("section",ue,[t(o)])]),_:1})}var Se=v(se,[["render",oe]]);export{Se as default};
