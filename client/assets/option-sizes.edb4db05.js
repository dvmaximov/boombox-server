import{d as _e,e as at,f as ot,g as it,a as Pt,h as Tt,i as Ye,j as _t}from"./QInput.f4bd6e76.js";import{c as xe,r as F,d as o,w as te,a1 as Dt,h as v,e as Lt,ar as Et,o as rt,j as De,ax as Mt,a3 as K,aL as Rt,aM as Ht,p as Kt,Q as Ve,aN as $t,aC as Qt,aD as ce,n as j,ao as zt,aO as Nt,$ as Te,a0 as ee,ae as jt,as as Ut,z as Wt}from"./index.1a710307.js";import{u as st,a as ct}from"./use-dark.e1857b32.js";import{Q as Xt,a as pt,b as Gt}from"./QItem.6e849287.js";import{u as Jt,v as Ze,b as Yt,c as Zt,a as eu,p as et,r as tt,s as tu,d as uu}from"./position-engine.2cf587f5.js";import{u as lu,a as nu,b as au,c as ou,g as iu}from"./message.store.05995818.js";import{a as ru,u as su,b as cu,c as du,d as vu,r as fu,e as ut,f as mu,g as gu,Q as hu}from"./QDialog.df7d4b78.js";import{a as yu}from"./focus-manager.05708ea9.js";import{u as bu,a as Su}from"./use-virtual-scroll.c152b48a.js";import{n as lt}from"./format.80c443ea.js";var Cu=xe({name:"QMenu",inheritAttrs:!1,props:{...Jt,...lu,...st,...ru,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ze},self:{type:String,validator:Ze},offset:{type:Array,validator:Yt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...nu,"click","escapeKey"],setup(e,{slots:b,emit:i,attrs:I}){let V=null,r,g,f;const h=De(),{proxy:A}=h,{$q:x}=A,S=F(null),P=F(!1),w=o(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),E=ct(e,x),{registerTick:O,removeTick:c}=su(),{registerTimeout:M}=au(),{transitionProps:D,transitionStyle:de}=cu(e),{localScrollTarget:ve,changeScrollEvent:k,unconfigureScrollTarget:H}=Zt(e,$),{anchorEl:R,canShow:fe}=eu({showing:P}),{hide:ue}=ou({showing:P,canShow:fe,handleShow:n,handleHide:y,hideOnRouteChange:w,processOnMount:!0}),{showPortal:le,hidePortal:T,renderPortal:we}=du(h,S,ye,"menu"),ne={anchorEl:R,innerRef:S,onClickOutside(s){if(e.persistent!==!0&&P.value===!0)return ue(s),(s.type==="touchstart"||s.target.classList.contains("q-dialog__backdrop"))&&K(s),!0}},ae=o(()=>et(e.anchor||(e.cover===!0?"center middle":"bottom start"),x.lang.rtl)),oe=o(()=>e.cover===!0?ae.value:et(e.self||"top start",x.lang.rtl)),Ie=o(()=>(e.square===!0?" q-menu--square":"")+(E.value===!0?" q-menu--dark q-dark":"")),me=o(()=>e.autoClose===!0?{onClick:re}:{}),ie=o(()=>P.value===!0&&e.persistent!==!0);te(ie,s=>{s===!0?(gu(W),uu(ne)):(ut(W),tt(ne))});function U(){yu(()=>{let s=S.value;s&&s.contains(document.activeElement)!==!0&&(s=s.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.querySelector("[autofocus], [data-autofocus]")||s,s.focus({preventScroll:!0}))})}function n(s){if(V=e.noRefocus===!1?document.activeElement:null,vu(he),le(),$(),r=void 0,s!==void 0&&(e.touchPosition||e.contextMenu)){const Q=Dt(s);if(Q.left!==void 0){const{top:qe,left:be}=R.value.getBoundingClientRect();r={left:Q.left-be,top:Q.top-qe}}}g===void 0&&(g=te(()=>x.screen.width+"|"+x.screen.height+"|"+e.self+"|"+e.anchor+"|"+x.lang.rtl,_)),e.noFocus!==!0&&document.activeElement.blur(),O(()=>{_(),e.noFocus!==!0&&U()}),M(()=>{x.platform.is.ios===!0&&(f=e.autoClose,S.value.click()),_(),le(!0),i("show",s)},e.transitionDuration)}function y(s){c(),T(),ge(!0),V!==null&&(s===void 0||s.qClickOutside!==!0)&&(((s&&s.type.indexOf("key")===0?V.closest('[tabindex]:not([tabindex^="-"])'):void 0)||V).focus(),V=null),M(()=>{T(!0),i("hide",s)},e.transitionDuration)}function ge(s){r=void 0,g!==void 0&&(g(),g=void 0),(s===!0||P.value===!0)&&(fu(he),H(),tt(ne),ut(W)),s!==!0&&(V=null)}function $(){(R.value!==null||e.scrollTarget!==void 0)&&(ve.value=iu(R.value,e.scrollTarget),k(ve.value,_))}function re(s){f!==!0?(mu(A,s),i("click",s)):f=!1}function he(s){ie.value===!0&&e.noFocus!==!0&&Mt(S.value,s.target)!==!0&&U()}function W(s){i("escapeKey"),ue(s)}function _(){tu({targetEl:S.value,offset:e.offset,anchorEl:R.value,anchorOrigin:ae.value,selfOrigin:oe.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ye(){return v(Et,D.value,()=>P.value===!0?v("div",{role:"menu",...I,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+Ie.value,I.class],style:[I.style,de.value],...me.value},Lt(b.default)):null)}return rt(ge),Object.assign(A,{focus:U,updatePosition:_}),we}}),ku=xe({name:"QField",inheritAttrs:!1,props:_e,emits:at,setup(){return ot(it())}});const Vu={xs:8,sm:10,md:14,lg:20,xl:24};var xu=xe({name:"QChip",props:{...st,...Rt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:b,emit:i}){const{proxy:{$q:I}}=De(),V=ct(e,I),r=Ht(e,Vu),g=o(()=>e.selected===!0||e.icon!==void 0),f=o(()=>e.selected===!0?e.iconSelected||I.iconSet.chip.selected:e.icon),h=o(()=>e.iconRemove||I.iconSet.chip.remove),A=o(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),x=o(()=>{const c=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(c?` text-${c} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(A.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(V.value===!0?" q-chip--dark q-dark":"")}),S=o(()=>{const c=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},M={...c,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||I.lang.label.remove};return{chip:c,remove:M}});function P(c){c.keyCode===13&&w(c)}function w(c){e.disable||(i("update:selected",!e.selected),i("click",c))}function E(c){(c.keyCode===void 0||c.keyCode===13)&&(K(c),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function O(){const c=[];A.value===!0&&c.push(v("div",{class:"q-focus-helper"})),g.value===!0&&c.push(v(Ve,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const M=e.label!==void 0?[v("div",{class:"ellipsis"},[e.label])]:void 0;return c.push(v("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},$t(b.default,M))),e.iconRight&&c.push(v(Ve,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&c.push(v(Ve,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...S.value.remove,onClick:E,onKeyup:E})),c}return()=>{if(e.modelValue===!1)return;const c={class:x.value,style:r.value};return A.value===!0&&Object.assign(c,S.value.chip,{onClick:w,onKeyup:P}),Kt("div",c,O(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Qt,e.ripple]])}}});const nt=e=>["add","add-unique","toggle"].includes(e),wu=".*+?^${}()|[]\\",Iu=Object.keys(_e);var Eu=xe({name:"QSelect",inheritAttrs:!1,props:{...bu,...Pt,..._e,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:nt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...at,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:b,emit:i}){const{proxy:I}=De(),{$q:V}=I,r=F(!1),g=F(!1),f=F(-1),h=F(""),A=F(!1),x=F(!1);let S=null,P,w,E,O=null,c,M,D,de;const ve=F(null),k=F(null),H=F(null),R=F(null),fe=F(null),ue=Tt(e),le=_t(We),T=o(()=>Array.isArray(e.options)?e.options.length:0),we=o(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ne,virtualScrollSliceSizeComputed:ae,localResetVirtualScroll:oe,padVirtualScroll:Ie,onVirtualScrollEvt:me,scrollTo:ie,setVirtualScrollSize:U}=Su({virtualScrollLength:T,getVirtualScrollTarget:bt,getVirtualScrollEl:je,virtualScrollItemSizeComputed:we}),n=it(),y=o(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,l=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&P!==void 0?P:[],a=l.map(m=>yt(m,u));return e.modelValue===null&&t===!0?a.filter(m=>m!==null):a}return l}),ge=o(()=>{const t={};return Iu.forEach(l=>{const u=e[l];u!==void 0&&(t[l]=u)}),t}),$=o(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),re=o(()=>Ye(y.value)),he=o(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||y.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),W=o(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),_=o(()=>T.value===0),ye=o(()=>y.value.map(t=>B.value(t)).join(", ")),s=o(()=>e.displayValue!==void 0?e.displayValue:ye.value),Q=o(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),qe=o(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||y.value.some(Q.value))),be=o(()=>n.focused.value===!0?e.tabindex:-1),Le=o(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${f.value}`),t}),Ee=o(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Me=o(()=>y.value.map((t,l)=>({index:l,opt:t,html:Q.value(t),selected:!0,removeAtIndex:ht,toggleOption:z,tabindex:be.value}))),dt=o(()=>{if(T.value===0)return[];const{from:t,to:l}=ne.value;return e.options.slice(t,l).map((u,a)=>{const m=X.value(u)===!0,d=t+a,C={clickable:!0,active:!1,activeClass:mt.value,manualFocus:!0,focused:!1,disable:m,tabindex:-1,dense:e.optionsDense,dark:$.value,role:"option",id:`${n.targetUid.value}_${d}`,onClick:()=>{z(u)}};return m!==!0&&(Ae(u)===!0&&(C.active=!0),f.value===d&&(C.focused=!0),C["aria-selected"]=C.active===!0?"true":"false",V.platform.is.desktop===!0&&(C.onMousemove=()=>{r.value===!0&&p(d)})),{index:d,opt:u,html:Q.value(u),label:B.value(u),selected:C.active,focused:C.focused,toggleOption:z,setOptionIndex:p,itemProps:C}})}),vt=o(()=>e.dropdownIcon!==void 0?e.dropdownIcon:V.iconSet.arrow.dropdown),ft=o(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),mt=o(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),L=o(()=>Fe(e.optionValue,"value")),B=o(()=>Fe(e.optionLabel,"label")),X=o(()=>Fe(e.optionDisable,"disable")),Se=o(()=>y.value.map(t=>L.value(t))),gt=o(()=>{const t={onInput:We,onChange:le,onKeydown:Ne,onKeyup:Qe,onKeypress:ze,onFocus:Ke,onClick(l){w===!0&&ee(l)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=le,t});te(y,t=>{P=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(g.value!==!0&&r.value!==!0||re.value!==!0)&&(E!==!0&&Z(),(g.value===!0||r.value===!0)&&G(""))},{immediate:!0}),te(()=>e.fillInput,Z),te(r,Be),te(T,Bt);function Re(t){return e.emitValue===!0?L.value(t):t}function Oe(t){if(t>-1&&t<y.value.length)if(e.multiple===!0){const l=e.modelValue.slice();i("remove",{index:t,value:l.splice(t,1)[0]}),i("update:modelValue",l)}else i("update:modelValue",null)}function ht(t){Oe(t),n.focus()}function He(t,l){const u=Re(t);if(e.multiple!==!0){e.fillInput===!0&&se(B.value(t),!0,!0),i("update:modelValue",u);return}if(y.value.length===0){i("add",{index:0,value:u}),i("update:modelValue",e.multiple===!0?[u]:u);return}if(l===!0&&Ae(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const a=e.modelValue.slice();i("add",{index:a.length,value:u}),a.push(u),i("update:modelValue",a)}function z(t,l){if(n.editable.value!==!0||t===void 0||X.value(t)===!0)return;const u=L.value(t);if(e.multiple!==!0){l!==!0&&(se(e.fillInput===!0?B.value(t):"",!0,!0),N()),k.value!==null&&k.value.focus(),(y.value.length===0||ce(L.value(y.value[0]),u)!==!0)&&i("update:modelValue",e.emitValue===!0?u:t);return}if((w!==!0||A.value===!0)&&n.focus(),Ke(),y.value.length===0){const d=e.emitValue===!0?u:t;i("add",{index:0,value:d}),i("update:modelValue",e.multiple===!0?[d]:d);return}const a=e.modelValue.slice(),m=Se.value.findIndex(d=>ce(d,u));if(m>-1)i("remove",{index:m,value:a.splice(m,1)[0]});else{if(e.maxValues!==void 0&&a.length>=e.maxValues)return;const d=e.emitValue===!0?u:t;i("add",{index:a.length,value:d}),a.push(d)}i("update:modelValue",a)}function p(t){if(V.platform.is.desktop!==!0)return;const l=t>-1&&t<T.value?t:-1;f.value!==l&&(f.value=l)}function Ce(t=1,l){if(r.value===!0){let u=f.value;do u=lt(u+t,-1,T.value-1);while(u!==-1&&u!==f.value&&X.value(e.options[u])===!0);f.value!==u&&(p(u),ie(u),l!==!0&&e.useInput===!0&&e.fillInput===!0&&ke(u>=0?B.value(e.options[u]):c))}}function yt(t,l){const u=a=>ce(L.value(a),t);return e.options.find(u)||l.find(u)||t}function Fe(t,l){const u=t!==void 0?t:l;return typeof u=="function"?u:a=>a!==null&&typeof a=="object"&&u in a?a[u]:a}function Ae(t){const l=L.value(t);return Se.value.find(u=>ce(u,l))!==void 0}function Ke(t){e.useInput===!0&&k.value!==null&&(t===void 0||k.value===t.target&&t.target.value===ye.value)&&k.value.select()}function $e(t){jt(t,27)===!0&&r.value===!0&&(ee(t),N(),Z()),i("keyup",t)}function Qe(t){const{value:l}=t.target;if(t.keyCode!==void 0){$e(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),Z(),typeof l=="string"&&l.length!==0){const u=l.toLocaleLowerCase(),a=d=>{const C=e.options.find(q=>d.value(q).toLocaleLowerCase()===u);return C===void 0?!1:(y.value.indexOf(C)===-1?z(C):N(),!0)},m=d=>{a(L)!==!0&&(a(B)===!0||d===!0||G(l,!0,()=>m(!0)))};m()}else n.clearValue(t)}function ze(t){i("keypress",t)}function Ne(t){if(i("keydown",t),Ut(t)===!0)return;const l=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||l===!0);if(t.keyCode===27){Te(t);return}if(t.keyCode===9&&u===!1){J();return}if(t.target===void 0||t.target.id!==n.targetUid.value||n.editable.value!==!0)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&r.value===!1){K(t),Y();return}if(t.keyCode===8&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Oe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(K(t),f.value=-1,Ce(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ae.value!==void 0&&(K(t),f.value=Math.max(-1,Math.min(T.value,f.value+(t.keyCode===33?-1:1)*ae.value.view)),Ce(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(K(t),Ce(t.keyCode===38?-1:1,e.multiple));const a=T.value;if((D===void 0||de<Date.now())&&(D=""),a>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||D.length!==0)){r.value!==!0&&Y(t);const m=t.key.toLocaleLowerCase(),d=D.length===1&&D[0]===m;de=Date.now()+1500,d===!1&&(K(t),D+=m);const C=new RegExp("^"+D.split("").map(Pe=>wu.indexOf(Pe)>-1?"\\"+Pe:Pe).join(".*"),"i");let q=f.value;if(d===!0||q<0||C.test(B.value(e.options[q]))!==!0)do q=lt(q+1,-1,a-1);while(q!==f.value&&(X.value(e.options[q])===!0||C.test(B.value(e.options[q]))!==!0));f.value!==q&&j(()=>{p(q),ie(q),q>=0&&e.useInput===!0&&e.fillInput===!0&&ke(B.value(e.options[q]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||D!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&K(t),f.value>-1&&f.value<a){z(e.options[f.value]);return}if(l===!0){const m=(d,C)=>{if(C){if(nt(C)!==!0)return}else C=e.newValueMode;if(se("",e.multiple!==!0,!0),d==null)return;(C==="toggle"?z:He)(d,C==="add-unique"),e.multiple!==!0&&(k.value!==null&&k.value.focus(),N())};if(e.onNewValue!==void 0?i("newValue",h.value,m):m(h.value),e.multiple!==!0)return}r.value===!0?J():n.innerLoading.value!==!0&&Y()}}function je(){return w===!0?fe.value:H.value!==null&&H.value.contentEl!==null?H.value.contentEl:void 0}function bt(){return je()}function St(){return e.hideSelected===!0?[]:b["selected-item"]!==void 0?Me.value.map(t=>b["selected-item"](t)).slice():b.selected!==void 0?[].concat(b.selected()):e.useChips===!0?Me.value.map((t,l)=>v(xu,{key:"option-"+l,removable:n.editable.value===!0&&X.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:be.value,onRemove(){t.removeAtIndex(l)}},()=>v("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:B.value(t.opt)}))):[v("span",{[qe.value===!0?"innerHTML":"textContent"]:s.value})]}function Ue(){if(_.value===!0)return b["no-option"]!==void 0?b["no-option"]({inputValue:h.value}):void 0;const t=b.option!==void 0?b.option:u=>v(Gt,{key:u.index,...u.itemProps},()=>v(Xt,()=>v(pt,()=>v("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let l=Ie("div",dt.value.map(t));return b["before-options"]!==void 0&&(l=b["before-options"]().concat(l)),Wt(b["after-options"],l)}function Ct(t,l){const u=l===!0?{...Le.value,...n.splitAttrs.attributes.value}:void 0,a={ref:l===!0?k:void 0,key:"i_t",class:he.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...u,id:l===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...gt.value};return t!==!0&&w===!0&&(Array.isArray(a.class)===!0?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),v("input",a)}function We(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(ke(t.target.value||""),E=!0,c=h.value,n.focused.value!==!0&&(w!==!0||A.value===!0)&&n.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,G(h.value)},e.inputDebounce)))}function ke(t){h.value!==t&&(h.value=t,i("inputValue",t))}function se(t,l,u){E=u!==!0,e.useInput===!0&&(ke(t),(l===!0||u!==!0)&&(c=t),l!==!0&&G(t))}function G(t,l,u){if(e.onFilter===void 0||l!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?i("filterAbort"):(n.innerLoading.value=!0,x.value=!0),t!==""&&e.multiple!==!0&&y.value.length!==0&&E!==!0&&t===B.value(y.value[0])&&(t="");const a=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);O!==null&&clearTimeout(O),O=a,i("filter",t,(m,d)=>{(l===!0||n.focused.value===!0)&&O===a&&(clearTimeout(O),typeof m=="function"&&m(),x.value=!1,j(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(l===!0?r.value===!0&&N():r.value===!0?Be(!0):r.value=!0),typeof d=="function"&&j(()=>{d(I)}),typeof u=="function"&&j(()=>{u(I)})}))},()=>{n.focused.value===!0&&O===a&&(clearTimeout(O),n.innerLoading.value=!1,x.value=!1),r.value===!0&&(r.value=!1)})}function kt(){return v(Cu,{ref:H,class:W.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&_.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:$.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:ft.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ee.value,onScrollPassive:me,onBeforeShow:pe,onBeforeHide:Vt,onShow:xt},Ue)}function Vt(t){Ge(t),J()}function xt(){U()}function wt(t){ee(t),k.value!==null&&k.value.focus(),A.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function It(t){ee(t),j(()=>{A.value=!1})}function qt(){const t=[v(ku,{class:`col-auto ${n.fieldClass.value}`,...ge.value,for:n.targetUid.value,dark:$.value,square:!0,loading:x.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...n.splitAttrs.listeners.value,onFocus:wt,onBlur:It},{...b,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&t.push(v("div",{ref:fe,class:W.value+" scroll",style:e.popupContentStyle,...Ee.value,onClick:Te,onScrollPassive:me},Ue())),v(hu,{ref:R,modelValue:g.value,position:e.useInput===!0?"top":void 0,transitionShow:M,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:pe,onBeforeHide:Ot,onHide:Ft,onShow:At},()=>v("div",{class:"q-select__dialog"+($.value===!0?" q-select__dialog--dark q-dark":"")+(A.value===!0?" q-select__dialog--focused":"")},t))}function Ot(t){Ge(t),R.value!==null&&R.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function Ft(t){N(),n.focused.value===!1&&i("blur",t),Z()}function At(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&k.value!==null&&k.value!==t&&k.value.focus(),U()}function J(){g.value!==!0&&(f.value=-1,r.value===!0&&(r.value=!1),n.focused.value===!1&&(O!==null&&(clearTimeout(O),O=null),n.innerLoading.value===!0&&(i("filterAbort"),n.innerLoading.value=!1,x.value=!1)))}function Y(t){n.editable.value===!0&&(w===!0?(n.onControlFocusin(t),g.value=!0,j(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?G(h.value):(_.value!==!0||b["no-option"]!==void 0)&&(r.value=!0))}function N(){g.value=!1,J()}function Z(){e.useInput===!0&&se(e.multiple!==!0&&e.fillInput===!0&&y.value.length!==0&&B.value(y.value[0])||"",!0,!0)}function Be(t){let l=-1;if(t===!0){if(y.value.length!==0){const u=L.value(y.value[0]);l=e.options.findIndex(a=>ce(L.value(a),u))}oe(l)}p(l)}function Bt(t,l){r.value===!0&&n.innerLoading.value===!1&&(oe(-1,!0),j(()=>{r.value===!0&&n.innerLoading.value===!1&&(t>l?oe():Be(!0))}))}function Xe(){g.value===!1&&H.value!==null&&H.value.updatePosition()}function pe(t){t!==void 0&&ee(t),i("popupShow",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function Ge(t){t!==void 0&&ee(t),i("popupHide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function Je(){w=V.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?b["no-option"]!==void 0||e.onFilter!==void 0||_.value===!1:!0),M=V.platform.is.ios===!0&&w===!0&&e.useInput===!0?"fade":e.transitionShow}return zt(Je),Nt(Xe),Je(),rt(()=>{S!==null&&clearTimeout(S)}),Object.assign(I,{showPopup:Y,hidePopup:N,removeAtIndex:Oe,add:He,toggleOption:z,getOptionIndex:()=>f.value,setOptionIndex:p,moveOptionSelection:Ce,filter:G,updateMenuPosition:Xe,updateInputValue:se,isOptionSelected:Ae,getEmittingOptionValue:Re,isOptionDisabled:(...t)=>X.value.apply(null,t)===!0,getOptionValue:(...t)=>L.value.apply(null,t),getOptionLabel:(...t)=>B.value.apply(null,t)}),Object.assign(n,{innerValue:y,fieldClass:o(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:ve,targetRef:k,hasValue:re,showPopup:Y,floatingLabel:o(()=>e.hideSelected!==!0&&re.value===!0||typeof h.value=="number"||h.value.length!==0||Ye(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(g.value===!0||_.value!==!0||b["no-option"]!==void 0))return w===!0?qt():kt();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{Z(),J()})},onClick(t){if(Te(t),w!==!0&&r.value===!0){J(),k.value!==null&&k.value.focus();return}Y(t)}},getControl:t=>{const l=St(),u=t===!0||g.value!==!0||w!==!0;if(e.useInput===!0)l.push(Ct(t,u));else if(n.editable.value===!0){const m=u===!0?Le.value:void 0;l.push(v("input",{ref:u===!0?k:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?n.targetUid.value:void 0,value:s.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...m,onKeydown:Ne,onKeyup:$e,onKeypress:ze})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&l.push(v("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Qe}))}if(ue.value!==void 0&&e.disable!==!0&&Se.value.length!==0){const m=Se.value.map(d=>v("option",{value:d,selected:!0}));l.push(v("select",{class:"hidden",name:ue.value,multiple:e.multiple},m))}const a=e.useInput===!0||u!==!0?void 0:n.splitAttrs.attributes.value;return v("div",{class:"q-field__native row items-center",...a,...n.splitAttrs.listeners.value},l)},getInnerAppend:()=>e.loading!==!0&&x.value!==!0&&e.hideDropdownIcon!==!0?[v(Ve,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:vt.value})]:null}),ot(n)}});function Mu(e,b){const i=F(null),I=o(()=>e.disable===!0?null:v("span",{ref:i,class:"no-outline",tabindex:-1}));function V(r){const g=b.value;r!==void 0&&r.type.indexOf("key")===0?g!==null&&document.activeElement!==g&&g.contains(document.activeElement)===!0&&g.focus():i.value!==null&&(r===void 0||g!==null&&g.contains(r.target)===!0)&&i.value.focus()}return{refocusTargetEl:I,refocusTarget:V}}var Ru={xs:30,sm:35,md:40,lg:50,xl:60};export{Cu as Q,Eu as a,xu as b,Ru as o,Mu as u};
